!function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=19)}([function(e,t,n){e.exports=n(11)()},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,n){var r=n(9),o=n(1);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}t.exports=n},function(e,t,n){var r=n(10);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(14),o=n(15),i=n(16);e.exports=function(e,t){return r(e)||o(e,t)||i()}},function(t,e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(e){return n(e)}:t.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(e)}t.exports=r},function(n,e){function r(e,t){return n.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.exports=r},function(e,t,n){"use strict";var s=n(12);function r(){}e.exports=function(){function e(e,t,n,r,o,i){if(i!==s){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},,,function(e,t,n){"use strict";n.r(t);var a="vkpb",r=window["".concat(a,"GlobalVars")]||{},o=r.blockName,s=r.restPath,i=r.postTypes,u=parseInt(r.postId,10),c=n(3),p=n.n(c),l=n(4),f=n.n(l),m=n(5),y=n.n(m),d=n(6),b=n.n(d),h=n(7),v=n.n(h),g=n(1),w=n.n(g),k=n(2),x=n.n(k),T=n(0),_=n.n(T),E=wp.components,O=wp.i18n.__,S=function(e){var t=e.children,n=e.isLoading;return wp.element.createElement(E.Placeholder,{icon:"grid-view",label:O("Vikoder: Latest Posts","vikoder-posts-block"),className:"".concat(a,"-placeholder").concat(n?" loading":""),instructions:O("Display a grid of latest posts with featured image","vikoder-posts-block")},t)};S.propTypes={children:_.a.node.isRequired,isLoading:_.a.bool.isRequired};var P=S,R=wp.i18n.__,C=wp.components.SelectControl,q=function(e){var t=e.value,n=e.onChange;return wp.element.createElement(C,{label:R("Post Type","vikoder-posts-block"),value:t,options:i,onChange:n})};q.propTypes={value:_.a.string.isRequired,onChange:_.a.func.isRequired};var j=q,L=wp.i18n.__,I=wp.components.TextControl,N=function(e){var t=e.type,n=e.onChangeType,r=e.limit,o=e.onChangeLimit,i=e.children;return wp.element.createElement("div",{className:"".concat(a,"-filter")},wp.element.createElement(j,{value:t,onChange:n}),wp.element.createElement(I,{type:"number",label:L("Limit","vikoder-posts-block"),value:r,onChange:o}),i)};N.propTypes={type:_.a.string.isRequired,onChangeType:_.a.func.isRequired,limit:_.a.number.isRequired,onChangeLimit:_.a.func.isRequired,children:_.a.node.isRequired};var A=N,D=wp.components.Notice,M=function(e){var t=e.error;return wp.element.createElement(D,{status:"error",isDismissible:!1},wp.element.createElement("p",null,t.message))};M.propTypes={error:_.a.shape().isRequired};var V=M,B=function(e){var t=e.post;return wp.element.createElement("div",{className:"".concat(a,"-cart-item"),key:t.key},wp.element.createElement("a",{href:t.link,title:t.title,className:"".concat(a,"-link")},wp.element.createElement("img",{src:t.thumb,alt:t.title}),wp.element.createElement("span",null,t.title)))};B.propTypes={post:_.a.shape({slug:_.a.string.isRequired,link:_.a.string.isRequired,title:_.a.string.isRequired,thumb:_.a.string.isRequired}).isRequired};var F=B,H=function(e){var t=e.posts;return wp.element.createElement("div",{className:"".concat(a,"-cards")},t.map(function(e){return wp.element.createElement(F,{post:e})}))};H.propTypes={posts:_.a.arrayOf(_.a.shape()).isRequired};var U=H,G=(n(13),wp.apiFetch),Q=wp.url.addQueryArgs,W=wp.element.Component,Y=wp.components.Spinner,z=function(e){function i(){var e,n;p()(this,i);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return n=y()(this,(e=b()(i)).call.apply(e,[this].concat(r))),x()(w()(w()(n)),"state",{posts:[],isLoading:!0}),x()(w()(w()(n)),"onSuccess",function(e){n.setState({posts:e,isLoading:!1,error:null})}),x()(w()(w()(n)),"onError",function(e){n.setState({error:e,isLoading:!1})}),x()(w()(w()(n)),"handleChangeType",function(e){var t=n.props.attributes.limit;n.handleChange(e,t)}),x()(w()(w()(n)),"handleChangeLimit",function(e){var t=n.props.attributes.type;n.handleChange(t,e)}),n}return v()(i,e),f()(i,[{key:"componentDidMount",value:function(){var e=this.props.attributes,t=e.type,n=e.limit;this.fetchPosts(t,n)}},{key:"getPath",value:function(e,t){var n=this.props.attributes.exclude;return Q(s,{limit:t,type:e,exclude:n})}},{key:"handleChange",value:function(e,t){(0,this.props.setAttributes)({type:e,limit:parseInt(t,10)}),this.setState({isLoading:!0}),this.fetchPosts(e,t)}},{key:"fetchPosts",value:function(e,t){G({path:this.getPath(e,t)}).then(this.onSuccess).catch(this.onError)}},{key:"render",value:function(){var e=this.state,t=e.posts,n=e.isLoading,r=e.error,o=this.props.attributes,i=o.type,a=o.limit;return wp.element.createElement(P,null,wp.element.createElement(A,{type:i,onChangeType:this.handleChangeType,limit:a,onChangeLimit:this.handleChangeLimit,isLoading:n},n?wp.element.createElement(Y,null):null),r?wp.element.createElement(V,{error:r}):wp.element.createElement(U,{posts:t}))}}]),i}(W);z.propTypes={attributes:_.a.shape().isRequired,setAttributes:_.a.func.isRequired};var J=z,K=n(8),X=n.n(K),Z=wp.element.RawHTML,$=function(e){var t,n=e.attributes;return wp.element.createElement(Z,null,(t=n,"[".concat(a," ").concat(Object.entries(t).map(function(e){var t=X()(e,2),n=t[0],r=t[1];return"".concat(n,'="').concat(r,'"')}).join(" "),"]")))};$.propTypes={attributes:_.a.shape().isRequired};var ee=$,te=wp.blocks.registerBlockType,ne=wp.i18n.__;te(o,{title:ne("Vikoder: Latest Posts","vikoder-posts-block"),icon:"grid-view",category:"widgets",keywords:[ne("Vikoder","vikoder-posts-block")],description:ne("Display a grid of latest posts with featured image","vikoder-posts-block"),attributes:{type:{type:"string",default:"post"},limit:{type:"number",default:3},exclude:{type:"number",default:u}},edit:J,save:ee})}]);